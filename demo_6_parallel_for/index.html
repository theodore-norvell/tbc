<html>
    <head>
        <title>TBC Demo 4</title>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="../frontpage/tbc.css">
    </head>
    <body id="body">
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="bin/controller.js"></script>
        <p><a href="../frontpage/index.html#demos">Back to demo list.</a></p>
        <p><a href="../demo_5_try_the_tm/try-it-now.html">Previous demo</a></p>
        <h1>Demo 6. Parallel For Loops</h1>
        <p>
            This page demonstrates parallel for loops with no communication.
        </p>
        <p>The TBC code is as follows.</p>
        <pre>
            parFor( count, ballBehaviour ) ;
        </pre>
        where ballBehaviour is defined by
        <pre>
    static function ballBehaviour( i : Int ) : Process<Triv> {
        var ball = balls[i] ;
        var t = 0 ;
        return loop(
            pause( 60 ) >
            exec( () -> { t = t + 60 ;
                          var x = 250-10 + 100 * Math.cos( t / (512+4*i) ) ;
                          ball.css( "left", x ) ;
                        } ) 
        ) ;
    }
        </pre>
        <div id="stage">

        </div>
        <p>The haxe code is <a href="src/Controller.hx">here</a>.</p>
        <div id="haxe:trace"></div>
    </body>
</html>
